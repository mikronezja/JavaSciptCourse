<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: console_script2.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: console_script2.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import fs from 'node:fs';
import { exec } from 'node:child_process';
import readline from 'node:readline'
/// 

/**
 * Zapisanie do pliku (zwiekszenie licznika) z wykorzystaniem funkcji synchroncznej
 */
function execute_sync()
{
    const data = fs.readFileSync("./src/counter.txt");
    console.log("Liczba uruchomień:", data.toString());
    fs.writeFileSync("./src/counter.txt", (parseInt(data)+1).toString());
}


/**
 * Zapisanie do (zwiekszenie licznika) z wykorzystaniem funkcji asynchroncznej
 */
function execute_async()
{
    fs.readFile("./src/counter.txt", "utf-8" , (error, data) => {
        if (error)
        {
            console.log(error);
            return;
        }
        else
        {
            /**
             * Jeżeli nie wystąpi błąd to zapisanie do pliku
             */
            console.log("Liczba uruchomień:", data.toString());
            fs.writeFile("./src/counter.txt", (parseInt(data)+1).toString(), () => {
                    if(error)
                    {
                        console.log(error);
                        return;
                    }
            } )
        }
    })
}
/**
 * Funkcja wywołująca w konsoli (cmd) to, co napisał użytkownik
 * @param {string} line - linia komend ktora ma być przekazana przez użytkownika
 */
function execute_command(line)
{
    exec(line, (err, output) => {
        if (err)
        {
            console.log(err.message);
            process.exit(0);
        }
        else
        {
            /**
             * Napisanie w konsoli to, co zostało otrzymane za pomocą funkcji exec
             */
            console.log(output);
        }
    })
}

/**
 * Funkcja, która zostaje wywołana, gdy użytkownik skorzysta z opcji pisania w konsoli
 */
function system_commands()
{
    console.log("Wprowadź komendy — naciśnięcie Ctrl+D kończy wprowadzanie danych");
    
    let rl = readline.createInterface({
		input: process.stdin, 
        output: process.stdout, 
        prompt: ''
    });

    /**
     * Jeżeli wpiszemy linie, mają być wykonywane komendy systemowe 
     */
    rl.on('line', async (line) => {

        const command = line.trim();

        if (command) {
        execute_command(command);
        }
        rl.prompt();
    })

    rl.on('close', () => {
        process.exit(0);
    })

}

/************************* */

/**
 * @param {string} args - pokazuje z ktora opcja ma być wywoływana nasza funkcja, tzn w jaki sposób ma być wywoływana
 */
const args = process.argv.slice(2);
if ( args.length === 0 )
{
    system_commands();
}
else if(args[0] === '--sync')
{
    execute_sync();
}
else if(args[0] === '--async')
{
    execute_async()
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#args">args</a></li><li><a href="global.html#execute_async">execute_async</a></li><li><a href="global.html#execute_command">execute_command</a></li><li><a href="global.html#execute_sync">execute_sync</a></li><li><a href="global.html#requestListener">requestListener</a></li><li><a href="global.html#request_listener">request_listener</a></li><li><a href="global.html#system_commands">system_commands</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun May 18 2025 11:55:56 GMT+0200 (czas środkowoeuropejski letni)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
